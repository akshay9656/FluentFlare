{% load static %}
<!DOCTYPE html>
<html dir="ltr" lang="en">

<head>

    <title>FluentsySpeak | Admin Page</title>
    <link rel="icon" href="{% static 'images/logo1.png' %}" type="image/png">

    <link href="{% static 'css/style.min.css' %}" rel="stylesheet" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
</head>

</head>

<body>


    <div id="main-wrapper">


        {% if admin_name %}
        
        <p class="fw-bolder row justify-content-center" style=" margin-top: 30px; font-size: larger;">Logged in as admin with username: {{ admin_name }} </p>
        <a class="row justify-content-center fw-bolder fs-5 text-cyan" style="text-decoration: none;" href="{% url 'signOut' %}">Log Out</a>
        
        
        {% endif %}
    

        <div class="page-wrapper mt-5">

            <div class="container-fluid">

                <div class="row">
                    <!-- Column -->
                    <div class="col-3">
                        <a href="{% url 'myadminpage' %}">
                            <div class="card card-hover">
                                <div class="box bg-cyan text-center">
                                    <h1 class="font-light text-white">
                                        <i class="mdi mdi-view-dashboard"></i>
                                    </h1>
                                    <h6 class="text-white">Dashboard
                                        
                                    </h6>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- Column -->
                    <div class="col-3">
                        <a href="{% url 'addtask' %}">

                            <div class="card card-hover">
                                <div class="box bg-success text-center">
                                    <h1 class="font-light text-white">
                                        <i class="mdi mdi-chart-areaspline"></i>
                                    </h1>
                                    <h6 class="text-white">Add Task And View Tasks ( total: {{totaltask}})</h6>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- Column -->
                    <div class="col-3">
                        <a href="{% url 'changepayment' %}">

                            <div class="card card-hover">
                                <div class="box bg-warning text-center">
                                    <h1 class="font-light text-white">
                                        <i class="mdi mdi-collage"></i>
                                    </h1>
                                    <h6 class="text-white">Change Payment</h6>
                                </div>
                            </div>
                        </a>
                    </div>
                    <!-- Column -->
                    <div class="col-3">
                        <a href="{% url 'changegrouplink' %}">

                            <div class="card card-hover">
                                <div class="box bg-danger text-center">
                                    <h1 class="font-light text-white">
                                        <i class="mdi mdi-border-outside"></i>
                                    </h1>
                                    <h6 class="text-white">Change Group Link</h6>
                                </div>
                            </div>
                        </a>
                    </div>


                </div>

                <div class="row">
                    <div class="col-md-12">
                        <div class="card">
                            <div class="card-body">

                                <div class="row">
                                    <!-- column -->

                                    <div class="col-12">
                                        <div class="row">
                                            <div class="col-4">
                                                <a href="{% url 'allusers' %}">
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-account fs-3 mb-1 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{totalregusers}}</h5>
                                                        <small class="font-light">Total Registered Users</small>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="col-4">
                                                <a href="{% url 'lastmonthusers' %}">
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-plus fs-3 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{recent_users_count}}</h5>
                                                        <small class="font-light">Last 28days Users</small>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="col-4">
                                                <a href="{% url 'enrolledusers' %}">
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-cart fs-3 mb-1 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{enrolled_users}}</h5>
                                                        <small class="font-light">Enrolled Users</small>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="col-4 mt-3">
                                                <a href="{% url 'notenrolledusers' %}">
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-tag fs-3 mb-1 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{not_enrolled_users}}</h5>
                                                        <small class="font-light">Not enrolled users</small>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="col-4 mt-3">
                                                <a href="{% url 'newmessages' %}">
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-table fs-3 mb-1 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{messages}}</h5>
                                                        <small class="font-light">Pending Messages</small>
                                                    </div>
                                                </a>
                                            </div>
                                            <div class="col-4 mt-3">
                                                <a href="{% url 'showpromoters' %}"> 
                                                    <div class="bg-dark p-10 text-white text-center">
                                                        <i class="mdi mdi-web fs-3 mb-1 font-16"></i>
                                                        <h5 class="mb-0 mt-1">{{promoter_count}}</h5>
                                                        <small class="font-light">promoters</small>
                                                    </div> 
                                                </a>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- column -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>







                <div class="row">
                    <!-- column -->
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Admins Of fluentsyspeak</h4>
                            </div>
                            <div class="comment-widgets scrollable">
                                <!-- Comment Row -->
                                {% for admin in admins %}
                                <div class="d-flex flex-row comment-row mt-0">
                                    <div class="p-2">
                                        {% if admin.profile_pic %}
                                        <img style="height: 50px;" src="{{ admin.profile_pic.url }}" alt="Profile Picture">
                                        {% else %}
                                        <img style="height: 50px;" src="/static/images/user.png" alt="Default Profile Picture">
                                        {% endif %}

                                    </div>
                                    <div class="comment-text w-100">
                                        <h6 class="font-medium">username: {{ admin.username }}</h6>
                                        <span class="mb-3 d-block">email: {{ admin.email }}
                                        </span>
                                        <div class="comment-footer">
                                            <span class="text-muted float-end">Joined : {{ admin.date_joined }}</span>
                                            <a style="text-decoration: none; " href="{% url 'toggle_admin_status' admin.id %}" class="btn btn-cyan btn-sm text-white">
                                                add/remove as admin
                                            </a>
                                            <a style="text-decoration: none; " href="{% url 'allusers' %}" class="btn btn-cyan btn-sm text-white">
                                                View all users
                                            </a>
                                            
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <li>No admin users found.</li>
                                {% endfor %}

                            </div>
                        </div>


                        <!-- card new -->
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Promoters Of fluentsyspeak</h4>
                            </div>
                            <div class="comment-widgets scrollable">
                                <!-- Comment Row -->
                                {% for d in promoters %}
                                <div class="d-flex flex-row comment-row mt-0">
                                    <div class="p-2">
                                        {% if d.userregister.profile_pic %}
                                        <img style="height: 50px;" src="{{ d.userregister.profile_pic.url }}" alt="Profile Picture">
                                        {% else %}
                                        <img style="height: 50px;" src="/static/images/user.png" alt="Default Profile Picture">
                                        {% endif %}

                                    </div>
                                    <div class="comment-text w-100">
                                        <h6 class="font-medium">username: {{d.userregister.user_username}}</h6>
                                        <span class="mb-3 d-block">email: {{d.userregister.user_email}}
                                        </span>
                                        <div class="comment-footer">
                                            <span class="text-muted float-end">Joined : {{ d.userregister.join_date }}</span> 
                                            <a style="text-decoration: none; " href="{% url 'toggle_promoter_status' d.userregister.user.id %}" class="btn btn-cyan btn-sm text-white">
                                                Promoter/Demoter
                                            </a>
                                            <a style="text-decoration: none; " href="{% url 'showpromoters' %}" class="btn btn-cyan btn-sm text-white">
                                                View all Promoters
                                            </a>
                                            
                                        </div>
                                    </div>
                                </div>
                                {% empty %}
                                <li>No promoters found.</li>
                                {% endfor %}

                            </div>
                        </div>
                    </div>
                    <!-- column -->

                    <div class="col-lg-6">
                        <!-- Card -->
                        <div class="card">
                            <div class="card-body">
                                <h4 class="card-title">Chat Option</h4>
                                <div class="chat-box scrollable" style="height: 475px">
                                    <!--chat Row -->
                                    <ul class="chat-list">
                                        {% for message in notes %}
                                        <!--chat Row -->
                                        <li class="chat-item">
                                            <div class="chat-img">
                                                {% if message.user.profile_pic %}
                                                    <img style="height: 50px;" src="{{ message.user.profile_pic.url }}" alt="Profile Picture">
                                                {% else %}
                                                    <img src="/static/images/user.png" alt="Default Profile Picture">
                                                {% endif %}
                                            </div>
                                            <div class="chat-content">
                                                <h6 class="font-medium">{{ message.user.username }}</h6>
                                                <div class="box bg-light-info">
                                                    {{ message.content }}
                                                </div>
                                            </div>
                                            <div class="chat-time">{{ message.timestamp }}</div>
                                        </li>
                                        {% empty %}
                                        <p>No Notes Here Yet</p>
                                        {% endfor %} 
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body border-top">
                                <form method="POST">
                                    {% csrf_token %}
                                    <div class="row">
                                        <div class="col-9">
                                            <div class="input-field mt-0 mb-0">
                                                <textarea id="textarea1" name="notebox" placeholder="Type and enter"
                                                    class="form-control border-0"></textarea>
                                            </div>
                                        </div>
                                        <div class="col-3">
                                            <button type="submit" class="btn-circle btn-lg btn-cyan float-end text-white"><i class="bi bi-send"></i></button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>


                    </div>
                </div>

            </div>

            <footer class="footer text-center">
                All Rights Reserved by Fluentsyspeak.in, Designed and Developed by
                <span class="fw-bolder" style="color: #52a7e0;">AKSHAY KRISHNA</span>.
            </footer>

        </div>

    </div>

    <script src="{% static 'js/jquery.min.js' %}"></script>

    <script src="{% static 'js/custom.min.js' %}"></script>

    <script src="{% static 'js/sidebarmenu.js' %}"></script>



</body>

</html>